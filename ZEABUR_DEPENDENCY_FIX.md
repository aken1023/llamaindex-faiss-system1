# ðŸ”§ Zeabur ä¾è³´è¡çªä¿®å¾©æŒ‡å—

## ðŸš¨ å•é¡Œæè¿°

Zeabur Docker æ§‹å»ºå¤±æ•—ï¼ŒéŒ¯èª¤ä¿¡æ¯ï¼š
```
ERROR: ResolutionImpossible: for help visit https://pip.pypa.io/en/latest/topics/dependency-resolution/#dealing-with-dependency-conflicts
```

## ðŸ” æ ¹æœ¬åŽŸå› 

1. **å›ºå®šç‰ˆæœ¬è¡çª**ï¼š`requirements-zeabur.txt` ä½¿ç”¨äº†å›ºå®šç‰ˆæœ¬ï¼ˆ`==`ï¼‰ï¼Œå°Žè‡´ä¾è³´ç„¡æ³•è§£æž
2. **éŽæ™‚çš„ç‰ˆæœ¬**ï¼šLlamaIndex 0.9.0 èˆ‡å…¶ä»–ç¾ä»£ä¾è³´ä¸å…¼å®¹
3. **ä¸å¿…è¦çš„ä¾è³´**ï¼šåŒ…å«äº† `pathlib2` ç­‰ Python 3.8+ ä¸éœ€è¦çš„åŒ…

## âœ… ä¿®å¾©å…§å®¹

### 1. æ›´æ–° `requirements-zeabur.txt`

**ä¸»è¦æ”¹è®Šï¼š**
- âŒ `llama-index==0.9.0` â†’ âœ… `llama-index>=0.10.0,<0.13.0`
- âŒ `fastapi==0.95.2` â†’ âœ… `fastapi>=0.100.0,<0.110.0`
- âŒ å›ºå®šç‰ˆæœ¬ (`==`) â†’ âœ… ç›¸å®¹ç¯„åœ (`>=,<`)
- âŒ `pathlib2==2.3.7` â†’ âœ… ç§»é™¤ï¼ˆä¸éœ€è¦ï¼‰

**ç‰ˆæœ¬ç­–ç•¥ï¼š**
- ä½¿ç”¨ç¯„åœç‰ˆæœ¬è€Œéžå›ºå®šç‰ˆæœ¬
- ç¢ºä¿ä¸»è¦ä¾è³´ç›¸äº’å…¼å®¹
- é¿å…ä½¿ç”¨ beta æˆ–é è¦½ç‰ˆæœ¬

### 2. å‰µå»º `requirements-minimal.txt`

**æœ€å°åŒ–ä¾è³´é›†åˆï¼š**
- åªåŒ…å«é‹è¡Œæ™‚å¿…éœ€çš„æ ¸å¿ƒä¾è³´
- ç§»é™¤å¯é¸çš„ ML åŠŸèƒ½ï¼ˆsentence-transformers, torchï¼‰
- ä½œç‚ºä¸»è¦ä¾è³´å®‰è£å¤±æ•—æ™‚çš„å¾Œå‚™æ–¹æ¡ˆ

### 3. å„ªåŒ– Dockerfile

**æ”¹é€²æ§‹å»ºéŽç¨‹ï¼š**
- å‡ç´š pipã€setuptoolsã€wheel
- é›™é‡å¾Œå‚™ç­–ç•¥ï¼šå…ˆå˜—è©¦å®Œæ•´ä¾è³´ï¼Œå¤±æ•—å‰‡ä½¿ç”¨æœ€å°åŒ–ä¾è³´
- æ›´å¥½çš„éŒ¯èª¤è™•ç†å’Œæ—¥èªŒ

## ðŸš€ éƒ¨ç½²æ­¥é©Ÿ

### 1. æŽ¨é€ä¿®å¾©ä»£ç¢¼

```bash
git add .
git commit -m "ä¿®å¾© Zeabur ä¾è³´è¡çªï¼šæ›´æ–°ç‰ˆæœ¬ç¯„åœå’Œå¾Œå‚™æ–¹æ¡ˆ"
git push
```

### 2. ç›£æŽ§ Zeabur é‡æ–°éƒ¨ç½²

åœ¨ Zeabur æŽ§åˆ¶é¢æ¿ä¸­æŸ¥çœ‹æ§‹å»ºæ—¥èªŒï¼š

**æˆåŠŸæ—¥èªŒæ‡‰é¡¯ç¤ºï¼š**
```
Step 6/12 : RUN pip install --no-cache-dir -r requirements-zeabur.txt
âœ… Successfully installed llama-index-0.10.x fastapi-0.100.x ...
```

**å¦‚æžœä½¿ç”¨å¾Œå‚™æ–¹æ¡ˆï¼š**
```
ä¸»è¦ä¾è³´å®‰è£å¤±æ•—ï¼Œå˜—è©¦æœ€å°åŒ–ä¾è³´...
âœ… Successfully installed minimal dependencies
```

### 3. æ¸¬è©¦ API åŠŸèƒ½

éƒ¨ç½²æˆåŠŸå¾Œæ¸¬è©¦æ ¸å¿ƒåŠŸèƒ½ï¼š

```bash
# å¥åº·æª¢æŸ¥
curl https://your-app.zeabur.app/health

# èªè­‰æ¸¬è©¦
curl -X POST https://your-app.zeabur.app/auth/register \
  -H "Content-Type: application/json" \
  -d '{"username":"test","email":"test@example.com","password":"123456"}'
```

## ðŸ”„ å¦‚æžœå•é¡ŒæŒçºŒ

### é¸é … 1ï¼šä½¿ç”¨ç´”æœ€å°åŒ–ä¾è³´

ä¿®æ”¹ Dockerfileï¼Œç›´æŽ¥ä½¿ç”¨æœ€å°åŒ–ä¾è³´ï¼š

```dockerfile
# æ›¿æ›é€™è¡Œï¼š
COPY scripts/requirements-zeabur.txt ./requirements-zeabur.txt
# ç‚ºï¼š
COPY scripts/requirements-minimal.txt ./requirements.txt

# ç„¶å¾Œï¼š
RUN pip install --no-cache-dir -r requirements.txt
```

### é¸é … 2ï¼šåˆ†æ­¥å®‰è£ä¾è³´

å‰µå»ºåˆ†å±¤å®‰è£ç­–ç•¥ï¼š

```dockerfile
# å…ˆå®‰è£åŸºç¤Žä¾è³´
RUN pip install fastapi uvicorn sqlalchemy
# å†å®‰è£ AI ç›¸é—œä¾è³´
RUN pip install llama-index faiss-cpu
# æœ€å¾Œå®‰è£å…¶ä»–å·¥å…·
RUN pip install requests loguru python-dotenv
```

### é¸é … 3ï¼šä½¿ç”¨é æ§‹å»ºæ˜ åƒ

è€ƒæ…®ä½¿ç”¨åŒ…å«æ©Ÿå™¨å­¸ç¿’ä¾è³´çš„åŸºç¤Žæ˜ åƒï¼š

```dockerfile
FROM pytorch/pytorch:1.13.1-cuda11.6-cudnn8-runtime
# æˆ–
FROM huggingface/transformers-pytorch-cpu:latest
```

## ðŸ“Š ä¾è³´å°æ¯”

| çµ„ä»¶ | èˆŠç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ | ç‹€æ…‹ |
|------|--------|--------|------|
| LlamaIndex | 0.9.0 | >=0.10.0,<0.13.0 | âœ… ä¿®å¾© |
| FastAPI | 0.95.2 | >=0.100.0,<0.110.0 | âœ… æ›´æ–° |
| PyTorch | 1.13.1 | å¯é¸å®‰è£ | âš ï¸ æŒ‰éœ€ |
| pathlib2 | 2.3.7 | ç§»é™¤ | âœ… æ¸…ç† |

## ðŸŽ¯ é æœŸçµæžœ

ä¿®å¾©å¾Œæ‡‰è©²çœ‹åˆ°ï¼š
- âœ… Docker æ§‹å»ºæˆåŠŸ
- âœ… æ‰€æœ‰ API ç«¯é»žæ­£å¸¸å·¥ä½œ
- âœ… ç”¨æˆ¶èªè­‰åŠŸèƒ½å®Œæ•´
- âœ… æ–‡æª”ä¸Šå‚³å’ŒæŸ¥è©¢åŠŸèƒ½æ­£å¸¸
- âš ï¸ AI æ¨¡åž‹åŠŸèƒ½å¯èƒ½éœ€è¦é¡å¤–é…ç½®ï¼ˆå¦‚æžœä½¿ç”¨æœ€å°åŒ–ä¾è³´ï¼‰

## ðŸ”§ æ•…éšœæŽ’é™¤

å¦‚æžœä»æœ‰å•é¡Œï¼š

1. **æª¢æŸ¥ Python ç‰ˆæœ¬**ï¼šç¢ºä¿ä½¿ç”¨ Python 3.11
2. **æª¢æŸ¥è¨˜æ†¶é«”é™åˆ¶**ï¼šæŸäº›ä¾è³´éœ€è¦è¼ƒå¤šè¨˜æ†¶é«”ç·¨è­¯
3. **æª¢æŸ¥ç¶²çµ¡é€£æŽ¥**ï¼šç¢ºä¿èƒ½è¨ªå• PyPI
4. **æŸ¥çœ‹å®Œæ•´æ—¥èªŒ**ï¼šåœ¨ Zeabur æŽ§åˆ¶é¢æ¿æŸ¥çœ‹è©³ç´°éŒ¯èª¤ä¿¡æ¯

---

**æ³¨æ„ï¼š** ä½¿ç”¨æœ€å°åŒ–ä¾è³´å¯èƒ½æœƒå½±éŸ¿éƒ¨åˆ† AI åŠŸèƒ½ï¼Œä½†æ ¸å¿ƒçŸ¥è­˜åº«å’Œèªè­‰åŠŸèƒ½æœƒæ­£å¸¸å·¥ä½œã€‚ 